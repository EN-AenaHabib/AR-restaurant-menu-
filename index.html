<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <title>Bella Vista AR - Pizza Demo</title>

  <!-- A-Frame + AR.js -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <style>
    body, html { margin:0; padding:0; width:100%; height:100%; overflow:hidden; font-family:sans-serif; }
    #splash {
      position:fixed; inset:0; z-index:9999;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      background:#000; color:white;
    }
    #splash h1 { color:#ff9b3c; font-size:28px; margin-bottom:10px; }
    #splash p { font-size:14px; text-align:center; max-width:250px; color:#ccc; }
    #splash button {
      margin-top:20px; padding:15px 40px; background:#ff6b00; border:none; border-radius:30px;
      color:white; font-weight:bold; font-size:16px; cursor:pointer;
    }

    #ctrl { position:fixed; bottom:20px; width:100%; display:none; justify-content:center; z-index:100; }
    #ctrl button { padding:10px 20px; background:#ff6b00; border:none; border-radius:10px; color:white; font-size:16px; cursor:pointer; }
  </style>
</head>
<body>

<!-- Splash -->
<div id="splash">
  <h1>üçï Bella Vista AR</h1>
  <p>Place the pizza icon on the table, then tap Start Menu.</p>
  <button onclick="startApp()">Start Menu</button>
</div>

<!-- AR Scene -->
<div id="arWrap" style="display:none;">
  <a-scene embedded
           arjs="sourceType: webcam; debugUIEnabled:false;"
           vr-mode-ui="enabled:false">

    <a-assets>
      <a-asset-item id="pizzaModel" src="pizza.glb"></a-asset-item>
    </a-assets>

    <!-- Pizza Marker -->
    <a-marker type="pattern" url="pattern_images.patt">
      <a-entity id="pizzaEntity"
                gltf-model="#pizzaModel"
                position="0 0 0"
                rotation="-90 0 0"
                scale="0.2 0.2 0.2"
                visible="false">
      </a-entity>
    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>
</div>

<!-- Controls -->
<div id="ctrl">
  <button onclick="rotatePizza()">Rotate üîÑ</button>
</div>

<script>
function startApp() {
  document.getElementById('splash').style.display = 'none';
  document.getElementById('arWrap').style.display = 'block';
  document.getElementById('ctrl').style.display = 'flex';

  // Get entities
  const pizza = document.getElementById('pizzaEntity');
  const marker = document.querySelector('a-marker');

  // Show pizza when marker detected
  marker.addEventListener('markerFound', () => pizza.setAttribute('visible', 'true'));
  marker.addEventListener('markerLost', () => pizza.setAttribute('visible', 'false'));
}

function rotatePizza() {
  let p = document.getElementById('pizzaEntity');
  let curr = p.getAttribute('rotation');
  p.setAttribute('rotation', {x: curr.x, y: curr.y + 45, z: curr.z});
}
</script>

</body>
</html>
