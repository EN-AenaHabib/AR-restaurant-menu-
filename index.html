<!DOCTYPE html>
<html>
<head>
  <title>Bon App√©tit AR Menu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; overflow: hidden; background: #000; }

    /* FORCE VIDEO FULLSCREEN */
    video, .arjs-video {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      object-fit: cover !important;
      z-index: -1 !important;
    }

    /* FORCE CANVAS FULLSCREEN */
    .a-canvas {
      width: 100vw !important;
      height: 100vh !important;
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
    }

    #ui-overlay {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      z-index: 9999; display: flex; flex-direction: column;
      align-items: center; justify-content: center; background: #000; color: #fff;
      font-family: sans-serif; transition: opacity 0.6s ease;
    }
    #ui-overlay.hidden { opacity: 0; pointer-events: none; }
    .spinner { width: 40px; height: 40px; border: 3px solid rgba(255,255,255,0.2); border-top-color: #fff; border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>

<body style="margin: 0; overflow: hidden;">

<div id="ui-overlay">
  <div class="spinner"></div>
  <p style="margin-top: 20px;">Starting Camera...</p>
</div>

<a-scene
  vr-mode-ui="enabled: false"
  loading-screen="enabled: false"
  arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono;"
  renderer="antialias: true; alpha: true; precision: medium;"
>

  <a-entity light="type: ambient; intensity: 2;"></a-entity>

  <a-marker type="pattern" url="pattern-images.patt">
    <a-entity gltf-model="pizza.glb" scale="0.05 0.05 0.05"></a-entity>
  </a-marker>

  <a-marker type="pattern" url="pattern-burger.patt">
    <a-entity gltf-model="burger.glb" scale="0.3 0.3 0.3"></a-entity>
  </a-marker>

  <a-marker type="pattern" url="pattern-shawarma.patt">
    <a-entity gltf-model="shawarma.glb" scale="0.5 0.5 0.5"></a-entity>
  </a-marker>

  <a-marker type="pattern" url="pattern-latte.patt">
    <a-entity gltf-model="iced_matcha.glb" scale="0.5 0.5 0.5"></a-entity>
  </a-marker>

  <a-marker type="pattern" url="pattern-donut.patt">
    <a-entity gltf-model="maple_donut.glb" scale="0.8 0.8 0.8"></a-entity>
  </a-marker>

  <a-marker type="pattern" url="pattern-rollcake.patt">
    <a-entity gltf-model="sakura_cake_roll.glb" scale="0.8 0.8 0.8"></a-entity>
  </a-marker>

  <a-entity camera></a-entity>
</a-scene>

<script>
  const overlay = document.getElementById('ui-overlay');
  
  // Hide loading screen when camera is actually ready
  window.addEventListener('camera-init', () => {
    overlay.classList.add('hidden');
    // Final force-resize to kill any black bars
    window.dispatchEvent(new Event('resize'));
  });

  // The "Hammer" Fix: Force the video to stay fullscreen every single frame
  function forceFullscreen() {
    const video = document.querySelector('video');
    if (video) {
      video.style.width = "100vw";
      video.style.height = "100vh";
      video.style.marginLeft = "0";
      video.style.marginTop = "0";
    }
  }

  // Run the hammer fix every 500ms to fight AR.js auto-resizing
  setInterval(forceFullscreen, 500);
</script>

</body>
</html>
